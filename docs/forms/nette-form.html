<!DOCTYPE html><html><head><title>Wizhi CMS 文档</title><link rel="stylesheet" href="https://iwillhappy1314.github.io/wizhi-cms-doc/style.css"><meta name="viewport" content="width=device-width, initial-scale=1"><style>.wrap {
    width: 1200px;
}
</style></head><body id="main" data-spy="scroll" data-target="#nav"><header id="header" class="wrapper"><div id="header-inner" class="inner"><h1 id="logo-wrap"><a id="logo" href="/wizhi-cms-doc/">Wizhi CMS</a></h1><nav id="main-nav"><a href="/wizhi-cms-doc/" class="main-nav-link">文档</a><a target="_blank" href="https://github.com/iwillhappy1314/wizhi-cms" class="main-nav-link">代码</a><a target="_blank" href="https://github.com/iwillhappy1314/wizhi-ui" class="main-nav-link">UI 库</a><a target="_blank" href="https://github.com/iwillhappy1314/front" class="main-nav-link">前端工具</a><a target="_blank" href="https://github.com/iwillhappy1314/enter" class="main-nav-link">主题框架</a><a target="_blank" href="https://www.wpzhiku.com" class="main-nav-link">WordPress 智库</a></nav></div></header><div id="content-wrap"><div id="content" class="wrapper"><div id="content-inner"><article itemscope="" itemtype="http://schema.org/Article" class="article-container"><div class="article-inner"><div class="article"><div class="inner"><header class="article-header"><span>Wizhi CMS 文档</span></header><div itemprop="articleBody" class="article-content"><h2>Formmanager</h2><p>Nette Form 属于 Nette Framework 的一部分，也可以直接单独拿来用。Nette Form 功能非常全面，可以支持前后端同步验证。Nette Form 非常灵活，可以很方便的添加自定义控件类型。为我们创建表单提供了很大的便利，可以为我们节省不少时间，提高效率，减少人为的失误发生。</p>
<p>我们通过扩展Nette Form 的方式，把平时开发中常用的表单控件都写成了组件，只要安装了Wizhi CMS 插件，就可以直接使用。</p>
<h2>开始使用</h2><pre><code class="language-php">use Wizhi\Forms\Form;

$form = new Form;

// 格式化表单组件为 Bootstrap 样式
wizhi_form( $form, &#39;horizontal&#39; );

$form-&gt;setMethod( &#39;POST&#39; );
</code></pre>
<h3>通用方法</h3><ul>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#175-184">setAction</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#187-194">getAction</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#197-209">setMethod</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#212-219">getMethod</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#222-230">isMethod</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#233-243">addProtection</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#246-267">addGroup</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#270-293">removeGroup</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#296-303">getGroups</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#306-314">getGroup</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#320-328">setTranslator</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#331-338">getTranslator</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#344-351">isAnchored</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#354-364">isSubmitted</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#367-374">isSuccess</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#389-409">getHttpData</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#412-452">fireEvents</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#468-477">reset</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#480-507">receiveHttpDat</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#513-524">validate</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#544-555">addError</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#558-565">getErrors</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#568-574">hasErrors</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#577-583">cleanErrors</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#586-593">getOwnErrors</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#599-611">getElementPrototype</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#614-622">setRenderer</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#625-635">getRenderer</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#638-643">beforeRender</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#646-660">fireRenderEvents</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#663-671">render</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#674-694">__toString</a></li>
<li><a href="https://api.nette.org/2.4/source-Forms.Form.php.html#713-723">getToggles</a></li>
<li><a href="https://api.nette.org/2.4/Nette.Forms.Container.html#_setDefaults">setDefaults()</a></li>
</ul>
<h2>Nette Form 默认控件</h2><h3>文本</h3><pre><code class="language-Php">$form-&gt;addText(&#39;zip&#39;, &#39;邮编:&#39;)
    -&gt;setRequired(&#39;邮编为必填项&#39;)
    -&gt;addRule(Form::PATTERN, &#39;邮编必须为5位数&#39;, &#39;([0-9]\s*){5}&#39;);
</code></pre>
<p>默认的的验证规则</p>
<pre><code class="language-Php">Form::MIN_LENGTH    最小字符长度    int $minLength
Form::MAX_LENGTH    最大字符长度    int $maxLength
Form::LENGTH        必须长度    [int $min, int $max] or int $length
Form::EMAIL            是否为Email?     
Form::URL            是否为 URL?     
Form::PATTERN        对正则表达式的整个值进行测试，有点像是在^和a $里面      string $pattern
Form::INTEGER        是否为整数is value integer?     
Form::NUMERIC        Form::INTEGER 的别名 
Form::FLOAT            是否为浮点数?     
Form::MIN            最小的整数值        int|float $minimum
Form::MAX            最大值为整数值       int|float $maximum
Form::RANGE            是否在范围内?    [int $min, int $max]
</code></pre>
<h3>密码</h3><pre><code class="language-Php">$form-&gt;addPassword(&#39;password&#39;, &#39;Password:&#39;)
    -&gt;setRequired()
    -&gt;addRule(Form::MIN_LENGTH, &#39;Password has to be at least %d characters long&#39;, 3)
    -&gt;addRule(Form::PATTERN, &#39;Password must contain a number&#39;, &#39;.*[0-9].*&#39;);
</code></pre>
<h3>文本</h3><pre><code class="language-php">$form-&gt;addTextArea(&#39;note&#39;, &#39;Note:&#39;)
    -&gt;setRequired(false) // optional
    -&gt;addRule(Form::MAX_LENGTH, &#39;Your note is way too long&#39;, 10000);
</code></pre>
<h3>电子邮件</h3><pre><code class="language-php">$form-&gt;addEmail(&#39;email&#39;, &#39;Email:&#39;);
</code></pre>
<h3>整数</h3><pre><code class="language-php">$form-&gt;addInteger(&#39;level&#39;, &#39;Level:&#39;)
    -&gt;setDefaultValue(0)
    -&gt;addRule($form::RANGE, [0, 100]);
</code></pre>
<h3>文件上传</h3><pre><code class="language-php">$form-&gt;addUpload(&#39;thumbnail&#39;, &#39;Thumbnail:&#39;)
    -&gt;setRequired(false) // optional
    -&gt;addRule(Form::IMAGE, &#39;Thumbnail must be JPEG, PNG or GIF&#39;)
    -&gt;addRule(Form::MAX_FILE_SIZE, &#39;Maximum file size is 64 kB.&#39;, 64 * 1024 /* size in Bytes */);
</code></pre>
<h3>多文件上传</h3><pre><code class="language-php">$form-&gt;addMultiUpload(&#39;files&#39;, &#39;Files&#39;);
</code></pre>
<h3>隐藏字段</h3><pre><code class="language-php">$form-&gt;addHidden(&#39;userid&#39;);
</code></pre>
<h3>复选框</h3><pre><code class="language-php">$form-&gt;addCheckbox(&#39;agree&#39;, &#39;I agree with terms&#39;)
    -&gt;setRequired(&#39;You must agree with our terms&#39;);
</code></pre>
<h3>单选列表</h3><pre><code class="language-php">$sex = [
    &#39;m&#39; =&gt; &#39;male&#39;,
    &#39;f&#39; =&gt; &#39;female&#39;,
];
$form-&gt;addRadioList(&#39;gender&#39;, &#39;Gender:&#39;, $sex);

// to list options within 1 line
$form-&gt;addRadioList(&#39;gender&#39;, &#39;Gender:&#39;, $sex)
    -&gt;getSeparatorPrototype()-&gt;setName(null);
</code></pre>
<h3>复选框</h3><pre><code class="language-php">$form = new Form;
$form-&gt;addCheckboxList(&#39;colors&#39;, &#39;Colors:&#39;, [
    &#39;r&#39; =&gt; &#39;red&#39;,
    &#39;g&#39; =&gt; &#39;green&#39;,
    &#39;b&#39; =&gt; &#39;blue&#39;,
]);
</code></pre>
<h3>下拉选择</h3><pre><code class="language-php">$countries = [
    &#39;Europe&#39; =&gt; [
        &#39;CZ&#39; =&gt; &#39;Czech republic&#39;,
        &#39;SK&#39; =&gt; &#39;Slovakia&#39;,
        &#39;GB&#39; =&gt; &#39;United Kingdom&#39;,
    ],
    &#39;CA&#39; =&gt; &#39;Canada&#39;,
    &#39;US&#39; =&gt; &#39;USA&#39;,
    &#39;?&#39;  =&gt; &#39;other&#39;,
];
$form-&gt;addSelect(&#39;country&#39;, &#39;Country:&#39;, $countries)
    -&gt;setPrompt(&#39;Pick a country&#39;);
</code></pre>
<h3>下拉多选</h3><pre><code class="language-php">$form-&gt;addMultiSelect(&#39;options&#39;, &#39;Pick many:&#39;, $options);
</code></pre>
<h3>提交按钮</h3><pre><code class="language-php">$form-&gt;addSubmit(&#39;submit&#39;, &#39;Register&#39;);
</code></pre>
<h3>按钮</h3><pre><code class="language-php">$form-&gt;addButton(&#39;raise&#39;, &#39;Raise salary&#39;)
    -&gt;setHtmlAttribute(&#39;onclick&#39;, &#39;raiseSalary()&#39;);
</code></pre>
<h3>图片按钮</h3><pre><code class="language-php">$form-&gt;addImage(&#39;submit&#39;, &#39;/path/to/image&#39;);
</code></pre>
<h2>Wizhi Form 扩展控件</h2><h3>WordPress 随机数验证</h3><pre><code class="language-php">$form-&gt;addCsrf( &#39;user_register&#39;, &#39;随机数验证失败。&#39; );
</code></pre>
<h3>Ajax 上传</h3><pre><code class="language-php">$form-&gt;addAjaxUpload( &#39;logo&#39;, &#39;Logo&#39;, false )
             -&gt;setAttribute( &#39;placeholder&#39;, &#39;Uploading Logo&#39; )
             -&gt;setAttribute( &#39;data-url&#39;, home_url( &#39;helper/ajax/upload&#39; ) )
             -&gt;setRequired( &#39;Please Upload a logo image&#39; )
             -&gt;setDefaultValue( $defaults-&gt;logo );
</code></pre>
<h3>获取短信验证码</h3><pre><code class="language-Php">$form-&gt;addSms( &#39;validate_code&#39;, &#39;短信验证码&#39; )-&gt;setRequired( &#39;请输入短信验证码。&#39; )
     -&gt;setAttribute( &#39;data-url&#39;, home_url(&#39;helper/get/sms/&#39;) )
     -&gt;setAttribute( &#39;nette-ajax-validate-href&#39;, home_url(&#39;helper/sms/&#39;) );
</code></pre>
<h3>图形验证码</h3><pre><code class="language-php">$form-&gt;addCaptcha( &#39;captacha&#39;, &#39;图形验证码&#39; )
     -&gt;setRequired( &#39;请输入图形验证码。&#39; )
     -&gt;setAttribute( &#39;data-url&#39;, home_url(&#39;helper/get/captcha/register&#39;) );
</code></pre>
<h3>Slider 输入</h3><pre><code class="language-php">$form-&gt;addSlider( &#39;quote&#39;, &#39; 邮箱&#39;, [ &#39;type&#39; =&gt; &#39;double&#39;, &#39;min&#39; =&gt; 0, &#39;max&#39; =&gt; 1000, &#39;grid&#39; =&gt; &#39;true&#39; ] );
</code></pre>
<h3>颜色选择</h3><pre><code class="language-php">$form-&gt;addColorpicker( &#39;event_box_color_m&#39;, &#39;Mobile Event Box Color&#39;, [] )
             -&gt;setOption( &#39;class&#39;, &#39;col-md-6&#39; )
             -&gt;setDefaultValue( $defaults-&gt;event_box_color_m );
</code></pre>
<h3>模拟下拉选择</h3><pre><code class="language-php">$form-&gt;addDropdownSelect( &#39;catalog&#39;, &#39;Catalog&#39;, taxonomy_option( &#39;catalog&#39; ) )
             -&gt;setAttribute( &#39;placeholder&#39;, &#39;Select Catalog&#39; )
             -&gt;setRequired( &#39;Please Select A Catalog&#39; )
             -&gt;setDefaultValue( wp_get_post_terms( $pid, &#39;catalog&#39; )[ 0 ]-&gt;term_id );
</code></pre>
<h3>WordPress 可视化编辑器</h3><pre><code class="language-php">$form-&gt;addEditor( &#39;description&#39;, &#39;Description &amp; more&#39; )
             -&gt;setRequired( &#39;Please input the Description&#39; )
             -&gt;setDefaultValue( $post-&gt;content );
</code></pre>
<h3>日期选择</h3><pre><code class="language-php">$form-&gt;addDatepicker( &#39;available_from&#39;, &#39;Available from&#39;, [] )
     -&gt;setDefaultValue( $post-&gt;meta-&gt;available_from );
</code></pre></div></div></div></div></article><aside id="sidebar" role="navigation"><div class="inner"><strong class="sidebar-title"><span>文章类型/分类法</span></strong><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/types.html" class="sidebar-link"><span>文章类型</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/taxonomy.html" class="sidebar-link"><span>分类方法</span></a><strong class="sidebar-title"><span>ORM</span></strong><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/orm.html" class="sidebar-link"><span>RedbeanPHP ORM</span></a><strong class="sidebar-title"><span>路由</span></strong><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/router.html" class="sidebar-link"><span>路由系统</span></a><strong class="sidebar-title"><span>辅助函数</span></strong><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/helper/options.html" class="sidebar-link"><span>表单选项</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/helper/template.html" class="sidebar-link"><span>模板函数</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/helper/functions.html" class="sidebar-link"><span>辅助函数</span></a><strong class="sidebar-title"><span>表单构建类</span></strong><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/forms/nette-form.html" class="sidebar-link"><span>Nette 表单类</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/forms/form.html" class="sidebar-link"><span>字段类型</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/forms/option.html" class="sidebar-link"><span>设置选项</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/forms/post-meta.html" class="sidebar-link"><span>文章元数据</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/forms/term-meta.html" class="sidebar-link"><span>分类法元数据</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/forms/user-meta.html" class="sidebar-link"><span>用户元数据</span></a><strong class="sidebar-title"><span>简码</span></strong><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/shortcodes/loop.html" class="sidebar-link"><span>文章循环</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/shortcodes/list.html" class="sidebar-link"><span>文章标题列表</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/shortcodes/media.html" class="sidebar-link"><span>图文文章列表</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/shortcodes/slider.html" class="sidebar-link"><span>幻灯片</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/shortcodes/page.html" class="sidebar-link"><span>页面内容</span></a><a href="https://iwillhappy1314.github.io/wizhi-cms-doc//docs/shortcodes/element.html" class="sidebar-link"><span>UI 元素</span></a></div></aside></div></div></div><footer id="footer"><div class="wrapper"><div class="inner"><div id="footer-copyright">© 2016<a href="https://www.wpzhiku.com/" target="_blank">WordPress 智库 | Live in China, WordPress Developer</a></div><div id="footer-links"><a href="https://github.com/iwillhappy1314" target="_blank" class="footer-link">Profile</a><a href="https://github.com/iwillhappy1314/wizhi-cms" target="_blank" class="footer-link">Github</a></div></div></div></footer></body></html>